<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Water Monitoring System</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-water"></i>
                <h1>WaterWatch</h1>
            </div>
            <button class="sidebar-close" id="sidebarClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="user-profile">
            <div class="profile-image">
                <i class="fas fa-user-circle"></i>
            </div>
            <div class="profile-info">
                <h3>Welcome</h3>
                <p class="user-name">Guest User</p>
            </div>
        </div>

        <nav class="sidebar-nav">
            <ul>
                <li>
                    <a href="index.html">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="submenu-toggle active">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                        <i class="fas fa-chevron-right"></i>
                    </a>
                    <ul class="submenu active">
                        <li><a href="#" class="active">Water Quality</a></li>
                        <li><a href="farm-view.html">Farm Management</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-chart-bar"></i>
                        <span>Analytics</span>
                        <i class="fas fa-chevron-right"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="#">Water Usage</a></li>
                        <li><a href="#">Pump Stats</a></li>
                        <li><a href="#">Reports</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-bell"></i>
                        <span>Alerts</span>
                        <i class="fas fa-chevron-right"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="#">Notifications</a></li>
                        <li><a href="#">Alert Settings</a></li>
                    </ul>
                </li>
                <li>
                    <a href="about.html">
                        <i class="fas fa-info-circle"></i>
                        <span>About</span>
                    </a>
                </li>
                <li>
                    <a href="contact.html">
                        <i class="fas fa-envelope"></i>
                        <span>Contact</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Topbar with sidebar toggle -->
        <div class="topbar">
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="dashboard-nav">
                <h2>Dashboard</h2>
                <div class="monitoring-status">
                    <span id="monitoringIndicator">
                        <i class="fas fa-circle"></i>
                        Monitoring Active
                    </span>
                </div>
            </div>
        </div>

        <!-- Quick Stats Section -->
        <div class="quick-stats">
            <div class="stat-box">
                <div class="stat-icon">
                    <i class="fas fa-temperature-high"></i>
                </div>
                <div class="stat-info">
                    <h3>Temperature</h3>
                    <p class="stat-value" id="tempValue">25°C</p>
                    <p class="stat-change positive">↑ 2.3°C</p>
                </div>
            </div>
            <div class="stat-box">
                <div class="stat-icon">
                    <i class="fas fa-tint"></i>
                </div>
                <div class="stat-info">
                    <h3>Humidity</h3>
                    <p class="stat-value" id="humidityValue">65%</p>
                    <p class="stat-change negative">↓ 5%</p>
                </div>
            </div>
            <div class="stat-box">
                <div class="stat-icon">
                    <i class="fas fa-cloud"></i>
                </div>
                <div class="stat-info">
                    <h3>Weather</h3>
                    <p class="stat-value" id="weatherStatus">Partly Cloudy</p>
                    <p class="weather-temp">22°C</p>
                </div>
            </div>
            <div class="stat-box">
                <div class="stat-icon">
                    <i class="fas fa-water"></i>
                </div>
                <div class="stat-info">
                    <h3>Water Required</h3>
                    <p class="stat-value" id="waterRequired">2.5L/m²</p>
                    <p class="stat-change recommendation">Optimal</p>
                </div>
            </div>
        </div>

        <!-- Main Grid Section -->
        <div class="dashboard-grid">
            <!-- Weather and Map Section -->
            <div class="grid-box wide">
                <div class="box-header">
                    <h2>Farm Overview</h2>
                    <div class="box-actions">
                        <button class="btn-action" id="refreshMap">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button class="btn-action" id="expandMap">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="map-container">
                    <div id="farmMap"></div>
                    <div class="weather-overlay">
                        <div class="current-weather">
                            <i class="fas fa-sun"></i>
                            <div class="weather-details">
                                <h3>Current Weather</h3>
                                <p class="temp">22°C</p>
                                <p class="condition">Sunny</p>
                            </div>
                        </div>
                        <div class="weather-forecast">
                            <!-- Forecast items will be added dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Water Quality Section -->
            <div class="grid-box">
                <div class="box-header">
                    <h2>Water Quality</h2>
                    <div class="box-actions">
                        <button class="btn-action active" data-period="day">Day</button>
                        <button class="btn-action" data-period="week">Week</button>
                        <button class="btn-action" data-period="month">Month</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="waterQualityChart"></canvas>
                </div>
                <div class="parameters-list">
                    <div class="parameter">
                        <span class="param-name">pH Level</span>
                        <span class="param-value">7.2</span>
                        <div class="param-indicator safe"></div>
                    </div>
                    <div class="parameter">
                        <span class="param-name">TDS</span>
                        <span class="param-value">450 ppm</span>
                        <div class="param-indicator warning"></div>
                    </div>
                </div>
            </div>

            <!-- Irrigation Schedule -->
            <div class="grid-box">
                <div class="box-header">
                    <h2>Irrigation Schedule</h2>
                    <div class="box-actions">
                        <button class="btn-action" onclick="window.location.href='water-usage.html'">
                            <i class="fas fa-plus"></i> Add Schedule
                        </button>
                    </div>
                </div>
                <div class="schedule-container" id="scheduleContainer">
                    <!-- Schedule items will be added dynamically -->
                </div>
            </div>

            <!-- Crop Management Section -->
            <div class="grid-box wide crop-management-section">
                <div class="box-header">
                    <h2>Crop Management</h2>
                    <div class="box-actions">
                        <div class="search-container">
                            <i class="fas fa-search"></i>
                            <input type="text" id="cropSearch" placeholder="Search crops...">
                        </div>
                        <button class="btn-action" id="addCropBtn">
                            <i class="fas fa-plus"></i> Add New Crop
                        </button>
                    </div>
                </div>

                <!-- Crop Selection Modal -->
                <div class="modal" id="cropModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Add New Crop</h3>
                            <button class="modal-close"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Select Crop</label>
                                <select id="cropType" class="form-control">
                                    <option value="">Choose a crop...</option>
                                    <option value="wheat">Wheat</option>
                                    <option value="rice">Rice</option>
                                    <option value="corn">Corn</option>
                                    <option value="potato">Potato</option>
                                    <option value="tomato">Tomato</option>
                                    <option value="soybean">Soybean</option>
                                    <option value="cotton">Cotton</option>
                                    <option value="sugarcane">Sugarcane</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Land Area</label>
                                <div class="input-group">
                                    <input type="number" id="landArea" class="form-control" min="0" step="0.1">
                                    <select id="areaUnit" class="form-control unit-select">
                                        <option value="hectare">Hectares</option>
                                        <option value="acre">Acres</option>
                                        <option value="sqm">Square Meters</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Soil Type</label>
                                <select id="soilType" class="form-control">
                                    <option value="">Select soil type...</option>
                                    <option value="loamy">Loamy</option>
                                    <option value="sandy">Sandy</option>
                                    <option value="clay">Clay</option>
                                    <option value="silt">Silty</option>
                                </select>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn-secondary">Cancel</button>
                            <button class="btn-primary">Add Crop</button>
                        </div>
                    </div>
                </div>

                <!-- Crop Cards Container -->
                <div class="crop-cards-container">
                    <!-- Example of a detailed crop card -->
                    <div class="crop-detail-card">
                        <div class="crop-header">
                            <div class="crop-icon">
                                <i class="fas fa-seedling"></i>
                            </div>
                            <div class="crop-title">
                                <h3>Wheat</h3>
                                <span class="crop-area">5.2 Hectares</span>
                            </div>
                            <div class="crop-actions">
                                <button class="btn-icon"><i class="fas fa-edit"></i></button>
                                <button class="btn-icon"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        </div>
                        
                        <div class="crop-info-grid">
                            <div class="info-item">
                                <span class="label">Soil Type</span>
                                <span class="value">Loamy</span>
                                <span class="recommendation good">Ideal Match</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Water Need</span>
                                <span class="value">2.5L/m²</span>
                                <div class="water-meter">
                                    <div class="meter-fill" style="width: 75%"></div>
                                </div>
                            </div>
                            <div class="info-item">
                                <span class="label">Weather Impact</span>
                                <span class="value">Optimal</span>
                                <span class="weather-note">Current conditions are favorable</span>
                            </div>
                        </div>

                        <div class="crop-recommendations">
                            <h4>Recommendations</h4>
                            <ul class="recommendation-list">
                                <li class="recommendation-item">
                                    <i class="fas fa-tint"></i>
                                    <span>Increase irrigation by 0.5L/m² due to high temperature</span>
                                </li>
                                <li class="recommendation-item">
                                    <i class="fas fa-cloud-sun"></i>
                                    <span>Best watering time: Early morning (6:00 AM - 8:00 AM)</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Add more crop cards here -->
                </div>
            </div>
        </div>
    </main>

    <script src="js/dashboard.js"></script>
    <script src="js/sidebar.js"></script>
</body>
</html>